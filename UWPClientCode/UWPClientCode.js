define("DS/UWPClientCode/SEO",function(){var a={setTitle:function(b){document.title=b},setDescription:function(b){document.querySelector('meta[name="description"]').setAttribute("content",b)}};return a});define("DS/UWPClientCode/UWPClientCode",[],function(){});define("DS/UWPClientCode/UWA/Widget",["UWA/Core","UWA/Widget","DS/Logger/Logger","DS/UIKIT/Mask"],function(e,c,b,d){var a=c.extend({setStyle:function(i){var h=this,g,f,j=h.environment.wp.widgetId;i=Array.isArray(i)?i.join("\n"):String(i);i=i.replace(/\/\*[\s\S]*?\*\//g,"");i=i.replace(/\n/g," ").replace(/\}/g,"}\n").split("\n");i=i.join("\n").trim().replace(/\s{2,}/g," ");if(i){g=document.getElementById("css-"+j);if(!g){g=document.createElement("style");g.setAttribute("id","css-"+j);g.setAttribute("type","text/css");f=document.getElementsByTagName("head").item(0);f.appendChild(g);if(g.styleSheet){g.styleSheet.cssText=i}else{g.appendChild(document.createTextNode(i))}}return i}},mask:function(f){d.mask(this.elements.body,f||e.i18n("Loading..."))},unmask:function(){d.unmask(this.elements.body)},show:function(){this.dispatchEvent("showWidget")},hide:function(){this.dispatchEvent("hideWidget")},log:function(){b.log.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))},info:function(){b.info.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))},warn:function(){b.warn.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))},error:function(){b.error.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))},debug:function(){b.debug.apply(null,["Widget",this.environment.wp.title,"(#"+this.id+") --"].concat(Array.prototype.slice.call(arguments)))}});return a});(function(a){define("DS/UWPClientCode/DebugMe",function(){var c=!!(a.UWA&&a.UWA.debug),b;b={setEnabled:function(d){if(c!==d){c=d}return c},isEnabled:function(){return c}};return b})}(this));define("DS/UWPClientCode/UWA/Element",["UWA/Core","UWA/Element","DS/UIKIT/Mask"],function(c,a,b){return c.extend(a,{mask:function(d){b.mask(this,d)},unmask:function(){b.unmask(this)},isMasked:function(){b.isMasked(this)}})});define("DS/UWPClientCode/I18n",["UWA/Core","UWA/Utils","UWA/Utils/Client"],function(f,i,c){var j="swymlang",h="en",b=window.dsLang,g,a,d={en:{localizedName:f.i18n("English"),staticName:"English"},fr:{localizedName:f.i18n("French"),staticName:"Français"},de:{localizedName:f.i18n("German"),staticName:"Deutsch"},ja:{localizedName:f.i18n("Japanese"),staticName:"日本語"},zh:{localizedName:f.i18n("Chinese"),staticName:"中文"}},l={devsymbol:{localizedName:"Symbol for Debug",staticName:"Symbol for Debug"},devkey:{localizedName:"NLS Key for Debug",staticName:"NLS Key for Debug"},devtrace:{localizedName:"NLS Trace for Debug",staticName:"NLS Trace for Debug"}},k=(function(){var s=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g,q=i.parseUrl(window.location).domain,m="",p="",r,n,o;if(!s.test(q)&&q!=="localhost"){r=q.split(".");m=r[r.length-2]+"."+r[r.length-1];if(r.length>2){r.shift()}p=r.join(".")}n=function(v,t,u){f.log("Setting lang cookie ("+j+") to "+v+" on domain "+t);document.cookie=j+"="+encodeURIComponent(v)+"; domain="+t+"; path=/; expires="+u.toGMTString()};o=function(){return document.cookie.indexOf(j)!==document.cookie.lastIndexOf(j)};return function(u){var t=new Date();t.setTime(t.getTime()+30*24*60*60*1000);n(u,p,t);if(o()){n("",m,new Date(0))}}}()),e=function(){g.setCurrentLanguage(b||c.Locale.lang,true)};g={getCurrentLanguage:function(){return a},setCurrentLanguage:function(n,o){var m=n;if(!f.is(d[m])&&!f.is(l[m])){m=h}if(a!==m&&!o){k(m);window.location.reload()}a=m},getSupportedLanguages:function(){return d},getDebugLanguages:function(){return l},replace:function(n,m){return n.replace(/\{([\w\-]+)\}/g,function(o,p){return m[p]!==undefined?m[p]:""})}};e();return g});define("DS/UWPClientCode/Fingerprint",function(){var a={};return{has:function(b){return !!(b&&a[b])},get:function(c){var b;if(!c){return null}b=a[c];return b?b:null},set:function(b,c){if(b){a[b]=c}},remove:function(b){if(b){delete a[b]}},setAll:function(c){if(c){for(var b in c){a[b]=c[b]}}}}});define("DS/UWPClientCode/Navigation",["require","UWA/Core","UWA/Promise","DS/PubSub/PubSub"],function(b,d,g,i){var c="/",f=":",e;function h(j){var k;if(typeof(Event)==="function"){k=new Event(j)}else{k=document.createEvent("Event");k.initEvent(j,true,true)}return k}function a(k){var j=[];k=(typeof k==="string"&&k!==null)?k:"";k=(k[0]==="#")?k.substr(1):k;k.split(c).forEach(function(l){if(l){l=l.split(f);j.push({name:l[0],param:l[1]})}});return j}e={pagesHierarchy:{},fullPagesHierarchy:{},currentAddress:[],previousAddress:[],navigationMode:"",preNavigationHandler:g.resolve.bind(g),postNavigationHandler:g.resolve.bind(g),setMode:function(j){this.navigationMode=j;if(this.navigationMode==="PATH"){this.baseUrl=dsBaseUrl;this.pushPath=function(k){(k.charAt(0)===c)&&(k=k.substr(1));history.pushState(null,"",d.Utils.parseUrl(this.baseUrl+k).source);window.dispatchEvent(h("popstate"))};e.routeTo=function(k){this.pushPath(k)};this.getCardUrl=function(k,l){return c+l.join(c)};e.getUrlParameter=function(l){var k=this,m=null;this.currentAddress.every(function(o,n){if(o.name===l&&k.currentAddress[n+1]){m=k.currentAddress[n+1].name;return false}return true});return m}}else{e.routeTo=function(k){this.goToUrl(k)};this.getCardUrl=function(k,n){var o=k[0]&&k[0].param?n[0]+":"+k[0].param:n[0];if(n.length>1){for(var p=1,m=n.length;p<m;p++){o+=c+n[p];if(p!==m-1&&k[p].param){o+=":"+k[p].param}}}return o};e.getUrlParameter=function(k){var l=null;this.currentAddress.every(function(m){if(m.name===k){l=m.param;return false}return true});return l}}},setHierarchy:function(j){var k={};function l(n,m){if(n.urlPart){m[n.urlPart]={};d.extend(m[n.urlPart],n);m=m[n.urlPart];delete m.children}if(n.children){n.children.forEach(function(o){l(o,m)})}}l(j,k);this.pagesHierarchy=k;this.fullPagesHierarchy=j},getCurrentAdress:function(){return this.currentAddress},getPreviousAdress:function(){return this.previousAddress},historyChanged:function(l){var n=this,o=a(l),j=g.deferred(),k=[],m;this.previousAddress=this.currentAddress;this.currentAddress=o;this.preNavigationHandler(this.currentAddress).then(function(){m=n.pagesHierarchy;o.forEach(function(p){var q=m[p.name];if(q){if(q.urlHandler){k.push(q.urlHandler)}m=m[p.name]}});b(k,function(){var q=arguments,u=g.deferred(),s=u.promise,r,p=0;m=n.pagesHierarchy;o.forEach(function(x,w,v){if(!m[x.name]){return}m=m[x.name];if(m.urlHandler){try{r=q[p++];if(r&&d.is(r.isAccessible,"function")){s=s.then((function(B,A,C,z){return function(){return B(A,C,z)}})(r.isAccessible,x.name,x.param,v)).then((function(z){return function A(B){if(B&&B.shouldChangeCard){i.dispatch(i.events.cardNavigation,[z.parentId,z.name],true)}else{if(B!==true){throw"Handler returned wrong value !"}}}})(m))}}catch(y){}}else{s=s.then((function(z){return function(){i.dispatch(i.events.cardNavigation,[z.parentId,z.name,true])}})(m))}});s.then(function t(){n.postNavigationHandler(n.currentAddress).then(j.resolve)});u.resolve()})});return j.promise},setNavigateSuccessHandler:function(j){if(d.is(j,"function")){this.postNavigationHandler=j}},setPreNavigateHandler:function(j){if(d.is(j,"function")){this.preNavigationHandler=j}},goToUrl:function(j){window.location.hash=j},handleCardChange:function(p){var j=this.currentAddress,o=false,m=true,k=[],l;function n(q,u){var s,t,r=["urlHandler","parentId","name"];for(s in q){if(!q.hasOwnProperty(s)||r.indexOf(s)>=0){break}if(s==="id"&&q.id===u){return q}else{if(s!=="id"){t=n(q[s],u);if(t){k.unshift(s);return t}}}}}n(this.pagesHierarchy,p);o=k.some(function(r,q){if(!d.is(j[q])||r!==j[q].name){return true}});if(o){l=this.getCardUrl(j,k);this.routeTo(l);m=false}return m}};return e});define("DS/UWPClientCode/PublicAPI",["UWA/Core","UWA/Promise","DS/PubSub/PubSub",["DS","WAFData","WAFData"].join("/"),"DS/UWPClientCode/Data","DS/UWPClientCode/Data/ApplicationConfiguration","DS/UWPClientCode/Data/User","DS/UWPClientCode/Data/Context","DS/UWPClientCode/Data/Widgets","DS/UWPClientCode/Data/Notification"],function(f,j,o,k,l,n,d,g,c,i){var h="7zhxiXCAwqKCBb8nn002";var m=function(s,r,p,q){if(f.is(s,"function")){if(q){setTimeout(function(){s.apply(r,p)})}else{s.apply(r,p)}}};var a=function(r,p){var q={};if(r){r.forEach(function(s,t){q[s.id]={index:t,active:s.active}})}p.forEach(function(s){var t=q[s.id];if(t){s.active=t.active;r[t.index]=s}else{r.push(s)}})};var b=function(q,r){var p=q.success;q.success=function(){var s=e._getContext(q.id,q.type);s.membersCount=s.membersCount+(r==="set"?1:-1);p&&p.call(q.scope,s)};g[r+"Acl"](q)};var e={events:{contextChange:"ContextChange",contextAdd:"ContextAdd",isEditionPossible:"IsEditionPossible",editionModeChanged:"EditionModeChanged",userRefreshed:"UserRefreshed"},callbacks:{addWidget:function(r,q,p){q()},loadExternalWidget:function(p,q){q()},beforeWidgetLaunch:function(p){}},applicationConfigurations:[],widgetConfigurations:[],user:{properties:{}},contexts:null,_setUser:function(p){var q={properties:{}};p=f.clone(p);this.user=f.extend(q,p)},getApplicationConfiguration:function(r){for(var q=0,p=this.applicationConfigurations.length;q<p;q++){if(this.applicationConfigurations[q].propertyKey===r){return this.applicationConfigurations[q].propertyValue}}},getAllApplicationConfigurations:function(p){var q=this;if(p){n.getAll({async:false,scope:q,success:function(r){q.applicationConfigurations=r}})}return q.applicationConfigurations},getWidgetConfiguration:function(r){for(var q=0,p=this.widgetConfigurations.length;q<p;q++){if(this.widgetConfigurations[q].id===r){return this.widgetConfigurations[q]}}},getAllWidgetConfigurations:function(p){var q=this;if(p){c.getConfigurations({async:false,id:h,scope:this,success:function(r){q.widgetConfigurations=r}})}return this.widgetConfigurations},getUser:function(){return this.user},getCachedCurrentUser:function(){return this.user},getUserAsync:function(p){d.getUser({scope:this,success:function(q){f.extend(this.user,q);if(f.is(p.success,"function")){p.success(q)}o.dispatch(this.events.userRefreshed)},failure:function(q){if(p.retryNumber-->0){setTimeout(this.getUserAsync.bind(this,p),p.retryDelay||1000)}else{if(f.is(p.failure,"function")){p.failure(q)}}}})},getCurrentUser:function(q){var p=q||{},s=this;function t(u){return new j(function(w,v){return k.authenticatedRequest(u,{method:"GET",onComplete:w,onFailure:v,onTimeout:v,onCancel:v})})}var r=function(){return new j(function(v,u){n.get("app.urls.passport").then(function(w){v(w)},u)})};return new j(function(v,u){if(s.user.email&&!p.refresh){v(s.user)}else{d.getCurrentUser().then(function(w){f.extend(s.user,w)},u).then(r,u).then(function(w){return w.propertyValue+"/api/authenticated/user/me"},u).then(t,u).then(function(w){var y=JSON.parse(w),x={email:y.fields.email,firstName:y.fields.firstName,lastName:y.fields.lastName,telephone:y.fields.telephone,address:y.fields.address,city:y.fields.city};f.extend(s.user,x);return s.user},u).then(v,u)["catch"](function(w){u(w)})}})},getUserProperty:function(p){return this.user.properties[p]},setUserProperty:function(q,p){this.user.properties[q]=p;d.setProperty({key:q,value:p})},removeUserProperty:function(p){delete this.user.properties[p];d.removeProperty({key:p})},getContextGroups:function(p){g.getContextGroups(p)},setContextGroups:function(p){g.setContextGroups(p)},getRestrictedContexts:function(x){var u=x||{},t=u.type,w=u.scope,v=u.success,s=u.failure;function p(z,y){if(y){return z.filter(function(A){return A.type===y})}else{return z}}function r(y){a(this.contexts,y);m(v,w,[p(y,t)])}function q(){m(s,w,arguments)}g.getAll({scope:this,ownership:true,success:r,failure:q})},getGroupedContexts:function(x){var u=x||{},t=u.type,w=u.scope,v=u.success,s=u.failure;function p(z,y){if(y){return z.filter(function(A){return A.type===y})}else{return z}}function r(y){a(this.contexts,y);m(v,w,[p(y,t)])}function q(){m(s,w,arguments)}g.getGroups({scope:this,ownership:true,groups:u.groups,success:r,failure:q})},getAllContexts:function(s){var q=s||{},u=q.type,t=q.scope,p=q.success,r=q.failure;function v(x,w){if(w){return x.filter(function(y){return y.type===w})}else{return x}}if(this.contexts){m(p,t,[v(this.contexts,u)],true)}else{m(r,t,[],true)}},_getAllContexts:function(p){var q=this.contexts;if(p){return q.filter(function(r){return r.type===p})}else{return q}},getContext:function(x){var u=x||{},v=u.success,s=u.failure,w=u.scope,p=u.id,t=u.type,q;function r(A){for(var z=0,y=A.length;z<y;z++){if(f.is(t)&&A[z].modelId===p&&A[z].type===t){return A[z]}else{if(A[z].id===p){return A[z]}}}}if(this.contexts){q=r(this.contexts)}if(q){m(v,w,[q],true)}else{m(s,w,["Context not found "+t+" "+p],true)}},_getContext:function(r,q){var p;if(!q){p=this.contexts.filter(function(s){return s.id===r})}else{p=this.contexts.filter(function(s){return s.modelId===r&&s.type===q})}return p[0]},setContext:function(q){var p=q||{},t=this,v=p.id,s=p.type,r=this._getContext(v,s);function u(w){if(!r){w.owner=true;a(t.contexts,[w]);o.dispatch(t.events.contextAdd,f.clone(w),true);m(p.success,p.scope,[w])}else{f.extend(r,w);r.template=(!w.template||w.template<0)?null:w.template;m(p.success,p.scope,[r])}}g.set({id:v,type:s,name:p.name,template:p.template,accessType:p.accessType,scope:p.scope,success:u,failure:p.failure})},removeContext:function(q){var p=q||{},u=this,w=p.id,t=p.type,s=p.scope,r=u._getContext(w,t);function v(){u.contexts.splice(u.contexts.indexOf(r),1);m(p.success,s,arguments)}t=t||r.type;g.remove({id:w,type:t,success:v,failure:p.failure,scope:s})},getActiveContext:function(t){var q=t,p=q.success,s=q.failure,u=q.scope;function v(y){for(var x=0,w=y.length;x<w;x++){if(y[x].active&&(!q.type||y[x].type===q.type)){return y[x]}}}if(this.contexts){var r=v(this.contexts);if(r){m(p,u,[r],true)}else{m(s,u,[],true)}}else{m(s,u,[],true)}},_getActiveContext:function(q){var r=this.contexts,p;for(p=0;p<r.length;p++){if(r[p].active&&(!q||r[p].type===q)){return r[p]}}},getAllActiveContexts:function(s){var q=s||{},p=q.success,r=q.failure,t=q.scope;function u(v){if(v.active){return true}}if(this.contexts){m(p,t,[this.contexts.filter(u)],true)}else{m(r,t,[],true)}},_getAllActiveContexts:function(){var p=this.contexts;return p.filter(function(q){return !!q.active})},setActiveContext:function(p){var r=this,q=r._getContext(p.id,p.type);if(q&&!q.active){this.contexts.some(function(s){if(s.active){s.active=false;return true}});q.active=true;o.dispatch(r.events.contextChange,f.clone(q),true);m(p.success,p.scope,[q],true)}else{m(p.failure,p.scope,[],true)}},_setActiveContext:function(s,q){var r=this,p=r._getContext(s,q);if(p&&!p.active){this.contexts.some(function(t){if(t.active){t.active=false;return true}});p.active=true;o.dispatch(r.events.contextChange,f.clone(p),true)}},getAclAsync:g.getAcl,setAclAsync:function(p){b(p,"set")},removeAclAsync:function(p){b(p,"remove")},setAclV2:function(q){q=q||{};var p=q.success;function r(s){var t=e._getContext(q.modelId,q.type);t.membersCount=s.membersCount;p&&p.call(q.scope,s)}q.success=r;g.setAclV2(q)},getWidgetById:c.getWidgetById,getWidgetByUrl:c.getWidgetByUrl,getWidgetInstance:c.getWidgetInstance,addWidgetInstance:function(q){var p=q||{},s;function t(u){o.dispatch("widget-"+p.parentId,["show",[u]],true);p.success&&p.success.call(p.scope,arguments)}function r(){p.failure&&p.failure.call(p.scope,arguments)}s={scope:this,success:t,failure:r};if(p.appId){f.merge(s,p);c.createWidgetInstanceFromApp(s)}else{s.widgetIdOrUrl=p.widgetIdOrUrl;f.merge(s,p);c.createWidgetInstance(s)}},getWidgetInstanceData:function(q){var p=q||{};function s(t){t&&f.merge(p.data,t);p.success&&p.success.call(p.scope,p.data)}function r(){p.failure&&p.failure.call(p.scope,arguments)}if(f.is(p.dataUrl,"string")&&p.dataUrl.length){l.request({url:p.dataUrl,method:"GET",success:s,failure:r})}else{s()}},setWidgetInstance:c.editWidgetInstance,removeWidgetInstance:c.removeWidgetInstance,getWidgetInstanceChildren:function(p){c.getWidgetInstanceChildren(p)},copyWidgetInstance:function(q){var p=q||{},s;function t(u){o.dispatch("widget-"+u.parentId,["show",[u]],true);p.success&&p.success.call(p.scope,arguments)}function r(){p.failure&&p.failure.call(p.scope,arguments)}s={scope:this,depth:1,success:t,failure:r};f.merge(s,p);c.copySubTree(s)},copyContextTree:c.copyContextTree,copySubTree:c.copySubTree,enableDragAndInstantiation:function(r){var q={},p=r||{},s=p.element;if(f.is(s,"element")){q["data-url"]=p.url;q["data-title"]=p.title;q["data-isolationLevel"]=p.trusted?1:2;["icon","dataUrl","data","appId","token","apps"].forEach(function(t){if(p[t]){q["data-"+t]=p[t]}});s.setStyle("-ms-touch-action","none");s.setAttributes(q)}},getPageWidget:function(r,t){var s=f.Widgets.instances;for(var q=0,p=s.length;q<p;q++){if(f.is(t)&&s[q][r]===t||s[q].id===r){if(s[q].environment){return s[q]}}}},getParentContextOwner:function(r){var q=r.environment,p=q&&q.wp&&q.wp.parent;while(p){if(p.wp&&p.wp.allowedChildrenContextType||!p.wp){return p.widget}else{p=p.wp.parent}}},getContextOwner:function(p){var t=f.Widgets&&f.Widgets.instances||[],s;for(var r=0,q=t.length;r<q;r++){s=t[r].environment;if(s&&s.wp&&s.wp.allowedChildrenContextType===p){return t[r]}}},getWidgetChildren:function(q){var p=q.environment;if(p&&p.wp&&p.wp.children){return p.wp.children}},requireAuthentication:function(){if(window.dsUserLogin){return false}document.location.replace(this.getApplicationConfiguration("app.urls.passport")+"/login?service="+escape(document.location.href));return true},getAllNotificationsAsync:i.getAll,getNotificationAsync:i.get,setPublicNotificationAsync:i.setPublic,setPrivateNotificationAsync:i.createPrivate,createNotification:i.create,publishNotification:i.publish,publishNotificationByMail:i.mail};return e});define("DS/UWPClientCode/Undo",["UWA/Core","UWA/Class","UWA/String","DS/UIKIT/Alert","i18n!DS/UWPClientCode/assets/nls/Undo/undo"],function(f,a,c,b,d){var e=a.extend({stack:null,duration:null,namespace:null,alert:null,init:function(){var h=this;h.stack={};h.duration=5000;h.namespace="action-undo";function j(l){if(!h.stack[l]){return}delete h.stack[l]}function i(m,l){if(!h.stack[m]){return}h.stack[m].undoAgree();j(m);h.alert.remove(l)}function g(l){var m=l.querySelector("."+h.namespace),n;if(f.is(m,"element")){n=m.dataset.id;h.stack[n].undoPending();m.addEventListener("click",i.bind(h,n,l))}}function k(l){var m=l.querySelector("."+h.namespace),n;if(f.is(m,"element")){n=m.dataset.id;m.removeEventListener("click",i.bind(h,n));if(h.stack[n]){h.stack[n].undoDecline()}j(n)}}h.alert=new b({closable:true,visible:true,autoHide:true,hideDelay:h.duration,closeOnClick:false,className:"undo-alert",events:{onShowMessage:g,onRemoveMessage:k}}).inject(document.body,"top");window.addEventListener("beforeunload",function(){for(var l in h.stack){h.stack[l].undoDecline()}})},addAction:function(i){var k=i.id,h=i.name||d.elementMessage,j=this,g;if(!k){f.log("addAction should have an id parameter");return}g=f.createElement("div",{html:"<b>"+c.escapeHTML(h)+"</b> "+d.deletionMessage+". "});f.createElement("span",{text:d.ClickToUndoMessage,styles:{fontWeight:"bold",fontSyle:"italic",cursor:"pointer","text-decoration":"underline"},"class":j.namespace,"data-id":k}).inject(g);j.stack[k]={undoAgree:i.undoAgree,undoDecline:i.undoDecline,undoPending:i.undoPending};j.alert.add({className:"success",message:g.getHTML()})},isPending:function(g){return !!this.stack[g]}});return new e()});define("DS/UWPClientCode/Data",["UWA/Core","UWA/Data","DS/UWPClientCode/I18n"],function(h,o,f){var e=window.location,q=e.pathname,c=e.protocol+"//"+e.host,m=q.indexOf("/api/widget/"),n=window.dsBaseUrl||c+q.substring(0,m!==-1?m+1:q.length);function k(r,l){return function(){r&&r.apply(l,arguments)}}function p(l){return l==="POST"||l==="PUT"||l==="PATCH"}function j(r,l){return p(r)&&(!l||l==="json")}function d(l){return l.indexOf("://")===-1&&l.charAt(0)!==0}function b(r,t){var s,l=r;for(s in t){if(t.hasOwnProperty(s)){l=i(l,s,t[s])}}return l}function g(l,r){return l.match(new RegExp("([?&])"+r+"=.*?(&|$)","i"))}function a(r,s,l){return r.replace(new RegExp("([?&])"+s+"=.*?(&|$)","i"),"$1"+s+"="+l+"$2")}function i(r,t,v){var s=r.indexOf("#"),x=(s===-1)?"":r.substr(s),u=(s===-1)?r:r.substr(0,s),w=r.indexOf("?")!==-1?"&":"?",l=encodeURIComponent(v);u=g(u,t)?a(u,t,l):u+w+t+"="+l;return u+x}return{prefix:window.dsPrefix||"",request:function(C){var r=C||{url:""},s=r.url||"",l=r.method||"POST",x=r.type,u=r.async!==false,A=r.contentType||"application/json",y=r.timeout||r.failure,v=!r.notEmbedParams,z=r.payload,B=r.queryParams,t,w;if(d(s)){s=n+s}if(B){s=b(s,B)}if(z&&p(l)){w=(!x||x==="json")?JSON.stringify(z):z}if(!w&&r.params){w=j(l,x)?JSON.stringify(v?{params:r.params}:r.params):r.params}t=h.merge(r.headers||{},{"Content-Type":A,"Accept-Language":f.getCurrentLanguage()});return o.request(s,{data:w,method:l,type:x,async:u,useJsonpRequest:false,headers:t,onTimeout:k(y,r.scope),onFailure:k(r.failure,r.scope),onComplete:function(D){if(typeof D==="string"){try{D=D?JSON.parse(D):{}}catch(E){D={}}}if(!D.result){D.result=h.clone(D)}if(h.is(r.success,"function")){r.success.call(r.scope,D.result,D.nb_result,D)}}})}}});define("DS/UWPClientCode/Data/ApplicationConfiguration",["UWA/Core","UWA/Promise","DS/UWPClientCode/Data"],function(d,c,b){var a={getAll:function(e){e=e||{};b.request({method:"GET",async:d.is(e.async)?e.async:true,url:b.prefix+"api/appProperties",success:e.success,failure:e.failure,scope:e.scope})},get:function(e){var f=e||"";return new c(function(h,g){b.request({method:"GET",url:b.prefix+"api/appProperties/"+f,success:h,failure:g})})}};return a});define("DS/UWPClientCode/Data/User",["UWA/Core","UWA/Promise","DS/UWPClientCode/Data"],function(d,c,b){var a={getUser:function(f){var e=f||{};b.request({method:"GET",async:e.async,url:b.prefix+"api/users/current",success:e.success,failure:e.failure,scope:e.scope})},getCurrentUser:function(){return new c(function(f,e){b.request({method:"GET",url:b.prefix+"api/users/current",success:f,failure:e})})},setProperty:function(f){var e=f||{};b.request({url:b.prefix+"api/users/properties/edit",success:e.success,failure:e.failure,scope:e.scope,params:{propertyKey:e.key,propertyValue:e.value}})},removeProperty:function(e){b.request({method:"DELETE",url:b.prefix+"api/users/properties/?key="+e.key,success:e.success,failure:e.failure,scope:e.scope})}};return a});define("DS/UWPClientCode/Data/Context",["DS/UWPClientCode/Data","DS/Logger/Logger"],function(d,c){var e=d.prefix+"api/contexts";var b=d.prefix+"api/contexts/v2";var a={getUrl:function(){return e},getAll:function(f){f=f||{};d.request({method:"GET",url:e,success:f.success,failure:f.failure,scope:f.scope,params:{displayOwnership:f.ownership,contextType:f.type}})},getGroups:function(f){f=f||{};d.request({method:"GET",url:e,success:f.success,failure:f.failure,scope:f.scope,params:{groups:f.groups.join(",")}})},getContextGroups:function(g){var h=g||{},f=e+"/"+h.type+"/"+h.modelId+"/groups";if(!h.modelId){c.warn("get context groups: modelId is mandatory")}if(!h.type){c.warn("get context groups: type is mandatory")}d.request({method:"GET",url:f,success:h.success,failure:h.failure,scope:h.scope})},setContextGroups:function(h){var i=h||{},f=i.groups||[],g=e+"/"+i.type+"/"+i.modelId+"/groups";if(!i.modelId){c.warn("set context groups: modelId is mandatory")}if(!i.type){c.warn("set context groups: type is mandatory")}d.request({method:"POST",url:g,success:i.success,failure:i.failure,scope:i.scope,params:f,notEmbedParams:true})},set:function(f){var g={type:f.type,name:f.name,modelId:f.id,access:f.accessType};if(f.template){g.template=f.template}d.request({url:e,success:f.success,failure:f.failure,scope:f.scope,async:f.async,params:g})},remove:function(f){d.request({method:"DELETE",url:e+"/"+f.type+"/"+f.id,success:f.success,failure:f.failure,scope:f.scope})},setAcl:function(f){d.request({method:"POST",url:e+"/acl",success:f.success,failure:f.failure,scope:f.scope,payload:{type:f.type,modelId:f.id,login:f.login,owner:f.isOwner,email:!!f.email}})},setAclV2:function(g){var i=g||{},f=i.recipients||[],h=i.type,k=i.modelId,j=i.sendEmail||false;if(!k){c.warn("modelId is mandatory")}if(!h){c.warn("type is mandatory")}if(f.length===0){c.warn("recipients are mandatory")}d.request({method:"POST",url:b+"/acl",payload:{recipients:f,type:h,modelId:k,sendEmail:j},success:g.success,failure:g.failure,scope:g.scope})},getAcl:function(f){d.request({method:"GET",url:e+"/"+f.type+"/"+f.id+"/acl",params:{displayUserInfo:f.userInfo,offset:f.offset,limit:f.limit},success:f.success,failure:f.failure,scope:f.scope})},removeAcl:function(f){var g=f||{};d.request({method:"DELETE",headers:{Accept:"application/json"},url:e+"/"+g.type+"/"+g.id+"/acl/"+g.login,success:g.success,failure:g.failure,scope:g.scope})}};return a});define("DS/UWPClientCode/Data/Widgets",["UWA/Core","DS/UWPClientCode/Data","DS/UWPClientCode/DebugMe","DS/UWPClientCode/I18n"],function(g,i,j,e){function h(p,r){if(!p){return}if(g.is(p,"object")){var n=[];Object.keys(p).forEach(function(s){n.push(p[s])});p=n}for(var o=0,m=p.length;o<m;o++){if(p[o].id===r||r==="0"){return p[o]}else{var q=h(p[o].children,r);if(!q&&p[o].contexts){q=h(p[o].contexts,r)}if(q){return q}}}}function k(q,s){var n=[],p=[];if(!q){return}if(g.is(q,"object")){Object.keys(q).forEach(function(t){n.push(q[t]);p.push(t)});q=n}for(var o=0,m=q.length;o<m;o++){var r=false;if(q[o].id===s){return p[o]?p[o]:true}else{if(q[o].contexts){r=k(q[o].contexts,s)}else{r=k(q[o].children,s)}if(r===true&&p[o]){return p[o]}else{if(r){return r}}}}}function d(m,n){m.forEach(function(o){o.contextType=n;if(o.children){d(o.children,n)}})}function c(n,p,s){function q(t,u){t.forEach(function(v){if(!v.isContainer){return}v.isEditable=u;if(v.children){q(v.children,u)}})}try{var m=require("DS/UWPClientCode/PublicAPI"),o=m._getContext(s,p);q(n,o&&o.owner)}catch(r){}}function b(n,m){return i.prefix+(window.ds.anonymous&&m?"public/api":"api")+n}function l(m){var n;if(!m){return m}n=new DOMParser().parseFromString(m,"text/html");return n.documentElement.textContent}var a,f={getWidget:function(m){var n={method:"GET",url:b("/widgets/json",true),params:{id:m.id,uwaUrl:m.url,cs:m.cs,lang:e.getCurrentLanguage()}};if(j.isEnabled()){n.params.debug_me=true}g.merge(n,m);i.request(n)},getWidgetById:function(m){f.getWidget(m)},getWidgetByUrl:function(m){f.getWidget(m)},getWidgetInstance:function(n){var o=h([a],n.id),m=n.success,q={method:"GET",url:b("/widget-instances/"+n.id,true),success:function p(r){g.merge(o,r);m&&m.call(n.scope,g.clone(r))}};if(!n.refresh&&o&&n.success){setTimeout(n.success.call(n.scope,g.clone(o)),0)}else{g.merge(q,n);i.request(q)}},getWidgetInstanceChildren:function(m){var o=h([a],m.id),r=m.success,s=m.contextId,n=m.contextType,q;if(s&&!n||n&&!s){return}function p(){o=h([a],m.id);if(s&&n&&o.contexts&&o.contexts[s]){o=g.clone(o);o={parent:o.contexts[s],children:o.contexts[s].children}}if(o&&r){r.call(m.scope,g.clone(o))}}if(o&&r&&!n){setTimeout(r.call(m.scope,g.clone(o)),0)}else{if(o&&r&&n&&o.contexts&&o.contexts[s]){o={parent:o.contexts[s],children:o.contexts[s].children};setTimeout(r.call(m.scope,g.clone(o)),0)}else{if(n&&s){q={depth:5,success:p};g.merge(q,m);this.getWidgetInstanceContextTree(q)}else{q={success:p};g.merge(q,m);this.getWidgetInstancePublicTree(q)}}}},editWidgetInstance:function(n){var q=n.success,m=n.failure,p;function o(s,u,t){var w=h([a],n.id),v=w.parentId&&h([a],w.parentId),r=w&&w.parentId,y=w&&w.contextParentId,x;if(w){Object.keys(n).forEach(function(z){if(z==="parentId"){x=h([a],n.parentId);if(x){w.parentId=n.parentId;x.children=x.children||[];if(y){x.children.push(v.contexts.splice(v.contexts.indexOf(w),1)[0])}else{if(r){x.children.push(v.children.splice(v.children.indexOf(w),1)[0])}}}}else{if(z==="data"){n.data=n.data||{};w.data=JSON.stringify(n.data)}else{if(["widgetId","data","title","name","coordinates"].indexOf(z)!==-1){w[z]=n[z]}}}});q&&q.call(n.scope,s,u,t)}else{m&&m.call(n.scope,s,u,t)}}p={method:"POST",url:b("/widget-instances/edit"),success:o,failure:function(t,r){var s;try{s=JSON.parse(r)}catch(u){s=r}m&&m.call(n.scope,s)},params:{id:n.id,widgetId:n.widgetId,parentId:n.parentId,data:n.data,title:n.title,name:n.name,coordinates:n.coordinates||n.rank},notEmbedParams:true};g.merge(p,n);i.request(p)},reorderWidgetInstances:function(m){var p=m.success,o;function n(q,s,r){var t=h([a],m.parentId);t.children=t.children||[];m.children.forEach(function(u){t.children.some(function(v){if(v.id===u.id){v.coordinates=u.coordinates;return true}})});p&&p.call(m.scope,q,s,r)}o={method:"POST",url:b("/widget-instances/reorder"),success:n,params:{parentId:m.parentId,children:m.children},notEmbedParams:true};g.merge(o,m);i.request(o)},createWidgetInstance:function(n){var r=n.success,m=n.failure,q;function p(s,v,u){var w=h([a],n.parentId),t;if(w){if(n.context&&n.context.modelId&&n.context.type&&s.contextParentId){w.contexts=w.contexts||{};d([s],n.context.type);w.contexts[n.context.id]=g.clone(s);r&&r.call(n.scope,s,v,u)}else{w.children=w.children||[];d([s],w.contextType);t=k([a],n.parentId);if(t){c([s],w.contextType,t)}w.children.push(g.clone(s));r&&r.call(n.scope,s,v,u)}}else{m&&m.call(n.scope)}}function o(s){if(!s){return}s.forEach(function(t){if(!t.data){t.data={}}if(t.children){o(t.children)}})}o(n.children);q={method:"POST",url:b("/widget-instances/add"),success:p,params:{widgetId:n.widgetIdOrUrl,name:n.name,data:n.data||{},parentId:n.parentId,coordinates:n.coordinates||n.rank,title:n.title,children:n.children,context:n.context||undefined},notEmbedParams:true};g.merge(q,n);i.request(q)},createWidgetInstanceFromApp:function(o){var s=o.success,n=o.failure,q,m=l(o.name),r=l(o.title);function p(t,v,u){var w=h([a],o.parentId);if(w||o.preview){if(!o.preview){w.children=w.children||[];d([t],w.contextType);w.children.push(g.clone(t))}s&&s.call(o.scope,t,v,u)}else{n&&n.call(o.scope)}}q={method:"POST",url:b("/widget-instances/addApp"),success:p,params:{appId:o.appId,parentId:o.parentId,dataUrl:o.dataUrl,data:o.data||{},name:m,title:r,coordinates:o.coordinates||o.rank,preview:o.preview},notEmbedParams:true};g.merge(q,o);i.request(q)},copyContextTree:function(m){var p=m.success;function o(q,s,r){var t=h([a],q.contextParentId);if(t){t.contexts=t.contexts||{};d([q],m.targetContext.type);c([q],m.targetContext.type,m.targetContext.modelId);t.contexts[m.targetContext.modelId]=g.clone(q);p&&p.call(m.scope,q,s,r)}}var n={method:"POST",url:b("/widget-instances/copy-tree"),success:o,notEmbedParams:true,params:{sourceContext:m.sourceContext,targetContext:m.targetContext,name:m.name,coordinates:m.coordinates||m.rank,depth:m.depth,replacement:m.replacement}};g.merge(n,m);i.request(n)},copySubTree:function(m){var p=m.success;function o(q,t,s){var u,r;u=h([a],q.parentId);if(u){u.children=u.children||[];d([q],u.contextType);r=k([a],m.sourceId);if(r){c([q],u.contextType,r)}q.sourceId=m.sourceId;u.children.push(g.clone(q));p&&p.call(m.scope,q,t,s)}}var n={method:"POST",url:b("/widget-instances/copy-subtree"),success:o,notEmbedParams:true,params:{sourceId:m.sourceId,targetContainerId:m.targetContainerId,name:m.name,coordinates:m.coordinates||m.rank,depth:m.depth,replacement:m.replacement}};g.merge(n,m);i.request(n)},removeWidgetInstance:function(m){var p=m.success,o;function n(r,t,s){var w=h([a],m.id),v=w&&w.contextParentId,q=w&&w.parentId,x=w&&(v||w.parentId);if(x){var u=h([a],x);if(u){if(v){u.contexts.splice(u.contexts.indexOf(w),1)}else{if(q){u.children.splice(u.children.indexOf(w),1)}}}}p&&p.call(m.scope,r,t,s)}o={method:"DELETE",url:b("/widget-instances/"+m.id),success:n};g.merge(o,m);i.request(o)},getCategories:function(m){m=m||{};var n={method:"GET",url:b("/categories/list")};g.merge(n,m);i.request(n)},getConfigurations:function(n){var p=100,o,q=g.is(n.start)?n.start:0,m=g.is(n.limit)?n.limit:p;o={method:"GET",url:b("/widgetConfigurations/list/"+n.id+"?start="+q+"&limit="+m)};g.merge(o,n);i.request(o)},getWidgetInstancePublicTree:function(m){var p=m.success,o;function n(q,s,r){a=q;p&&p.call(m.scope,q,s,r)}o={method:"GET",url:b("/widget-instances/publicTree",true),success:n,params:{fp:m.cacheId,lang:e.getCurrentLanguage()}};g.merge(o,m);i.request(o)},getWidgetInstanceContextTree:function(n){var m=n.failure,r=n.success,s=n.contextId,o=n.contextType,q;if(s&&!o||o&&!s){return}function p(t,v,u){var w=h([a],n.id);if(w&&!t.defaultContext&&o&&s&&t.contextParentId){w.contexts=w.contexts||{};d([t],o);c([t],o,s);w.contexts[s]=g.clone(t);r&&r.call(n.scope,t,v,u)}else{if(w&&!t.defaultContext&&!t.contextParentId){d([t],w.contextType);w.children=g.clone(t.children);r&&r.call(n.scope,t,v,u)}else{r&&r.call(n.scope,t,v,u)}}}q={method:"GET",url:b("/widget-instances/contextTree"),success:p,params:{contextParent:n.id,type:o,modelId:s,fp:n.cacheId,depth:n.depth,lang:e.getCurrentLanguage()}};g.merge(q,n);i.request(q)}};return f});define("DS/UWPClientCode/WidgetFactory",["UWA/Core","DS/UWPClientCode/Data/Widgets","DS/UWPClientCode/UWA/Environment","DS/UWPClientCode/PublicAPI","DS/UIKIT/Alert"],function(g,e,d,b,c){var f=new c({closable:true,visible:true,autoHide:false,className:"wp-alert"}).inject(document.body,"top");var a={load:(function(){function k(n,r,l,q){var m={},o;m.plugins=[];m.preferences=[];m.metas={};m.style="";m.isolationLevel=0;m.appId=null;m.token=null;m.isContainer=false;try{o=JSON.parse(n.data)||{}}catch(p){o={}}n.parsedData=o;if(n.appId){b.callbacks.loadExternalWidget(n,(function(v,y,t,w,s,x){return function u(B){var A;g.extend(v,B);if(v.userNotAllowed){v.isolationLevel=0;A={id:v.widgetId,body:"<p>"+(v.userNotAllowedMessage||g.i18n("userNotAllowed"))+"</p>"};g.merge(A,t);j(A,v,y,t,w)}else{if(v.isolationLevel>0){var z=document.createElement("textarea");if(v.name){z.innerHTML=v.name;v.name=z.value}if(v.title){z.innerHTML=v.title;v.title=z.value}z=null;i(v,y,t,w,s,x)}else{h(v,y,t,w,s,x)}}}}(n,r,m,o,l)))}else{if(n.isolationLevel>0){i(n,r,m,o,l,q)}else{h(n,r,m,o,l,q)}}}function h(n,q,m,o,l,p){e.getWidget({url:n.widgetId,cs:n.checksum,success:function(r){j(r,n,q,m,o,l,p)},failure:function(){f.add({className:"error",message:g.String.format(g.i18n('The widget "{0}" cannot be loaded'),n.name)});p&&p(n)}.bind(this)})}function i(n,q,m,o,l,p){j({},n,q,m,o,l,p)}function j(p,s,t,m,q,o,l){if(!p){return}var r={};r.name=s.name||p.name||"";r.title=s.title||p.title||r.name;r.isolationLevel=g.is(s.isolationLevel)?s.isolationLevel:(g.is(p.isolationLevel)?p.isolationLevel:m.isolationLevel);r.appId=p.appId||s.appId||m.appId;r.widgetId=s.widgetId||p.id;r.body=p.body;r.metas=p.metas||m.metas;r.plugins=p.plugins||m.plugins;r.preferences=p.preferences||m.preferences;r.script=p.script;r.style=p.style||"";r.isContainer=p.isContainer||m.isContainer;r.token=p.token||s.token||m.token;r.checksum=s.checksum;r.preview=s.preview;r.id=r.preview?"preview-"+g.Utils.getUUID().substr(0,6):s.id;r.children=s.children;r.coordinates=s.coordinates;r.el=s.el;r.parentId=s.parentId;r.parent=s.parent;r.data=q;r.allowedChildrenContextType=s.allowedChildrenContextType;r.warnings=s.warnings;r.initialView=s.initialView;(o?new o(r):new d(r)).loadWidget(r.id,{fetcher:p,onComplete:function n(u){b.callbacks.beforeWidgetLaunch(u);u.environment.launchWidget(q);s.widget=u;t&&t(s)}})}return function(m,o,l,n){if(g.is(m.id)&&!m.parent){e.getWidgetInstance({id:m.id,success:function(p){m.id=p.id;g.merge(m,p);k(m,o,l,n)}})}else{k(m,o,l,n)}}}())};return a});define("DS/UWPClientCode/WidgetCatalog",["UWA/Core","UWA/Event","UWA/Utils","DS/UWPClientCode/PublicAPI","DS/PubSub/PubSub","DS/UWPClientCode/WidgetFactory","DS/UWPClientControls/Modal","DS/UIKIT/Mask"],function(k,C,g,p,f,w,e,D){var o="100%",b="wp-drag",v="hide-catalog",h="added",q="added-check",A="collapsed",m="preview",r="direct-add-disable";var x,l=null,y=null,c=false,n=null,u=null,t=o,s=false,i=false;function z(){var F,H,E=k.createElement;y=E("div",{"class":"widget-catalog"});H=E("ul",{"class":"widget-list"});F=E("div",{"class":"catalog-close",events:{click:function(I){C.stop(I);x.close()}}});var G=p.getAllWidgetConfigurations();if(!G||G.length===0){G=p.getAllWidgetConfigurations(true)}G.forEach(function(I){var J,K=I.name;J=E("li",{"class":"widget "+b,title:K,html:[{tag:"img","class":"icon",src:I.icon},{tag:"div","class":"text-cell",html:{tag:"div","class":K.length>26?"ellipsis":"",html:{tag:"div","class":"text",text:K}}},{tag:"div","class":"direct-add",events:{click:function(M){C.stop(M);if(!i){var L=J.getData("conf");L.configId=L.id;d(L,J)}}}}],events:{click:function(M){C.stop(M);var L=J.getData("conf");L.configId=L.id;a(L,J)}}});I.configId=I.id;J.setAttribute("data-id",I.id);J.setData("conf",I);H.grab(J)});y.grab(H);y.grab(F);y.inject(l||document.body);l=null}function d(G,E){function F(H){f.dispatch("widgetAddFromCatalog-"+H,[G,"101"]);if(E){E.addClassName(q);E.removeClassName(h);setTimeout(function(){y.removeClassName(r);E.removeClassName(q);E.addClassName(h);i=false},1000)}}if(!G){return}i=true;y.addClassName(r);n(F)}function a(Q,N){var F,L,J,O,I,H=k.createElement,G=false,P={},E=g.getUUID();if(u){u.hide()}function K(){N.removeClassName(m)}function M(){var R;k.Widgets.instances.forEach(function(S){var T=S.id||null;if(T&&T===E){R=S.data||{};return}});if(R){Q.defaultData=R}d(Q,N);u.hide()}N.addClassName(m);P.data=Q.defaultData;P.title=L=Q.name;P.parent=false;P.widgetId=Q.widgetId;P.id=E;J=H("div",{"class":"preview-ctn",html:{tag:"div",html:[{tag:"div","class":"widget-icon",html:{tag:"img","class":"icon",src:Q.icon||""}},{tag:"div","class":"widget-desc",html:Q.description||""}]}});O=H("div",{"class":"error-widget",text:k.i18n("This widget cannot be loaded, please try again later.")});F=P.el=H("div",{"class":"module"}).inject(J);I=setTimeout(function(){D.unmask(F);O.inject(F)},10000);u=new e({className:"wp-widget-preview-modal",title:k.i18n("Widget preview:")+" "+L,display:true,overlay:true,draggable:false,destroy:true,content:J,buttons:[{value:k.i18n("Cancel"),className:"primary",key:"esc",handler:function(){u.hide()}}],events:{onShow:function(){if(!G){D.mask(F,k.i18n("Loading..."))}else{D.unmask(F)}},onHide:function(){var R,S;K();S=P.widget||null;R=S?S.environment:null;if(R){R.destroy()}u=null}}});w.load(P,function(){var U=P.widget,S=U?U.environment:null,T=S?S.wp.menu:null,R=S?S.html.header:null;if(!U){return}clearTimeout(I);O.hide();G=true;D.unmask(F);if(U.elements.actionMaximize){U.elements.actionMaximize.destroy()}u.removeButton(0);u.addButtons([{value:k.i18n("Add"),className:"primary",handler:M},{value:k.i18n("Cancel"),key:"esc",handler:function(){u.hide()}}]);if(T){T.removeItem({name:"share"});T.removeItem({name:"duplicate"});T.removeItem({name:"maximize"});T.removeItem({name:"delete"})}if(R){R.removeEvent("dblclick");R.removeClassName(b)}})}function B(){var E=y.getElements(".widget");if(!E){return}E.forEach(function(F){F.removeClassName(h);F.removeClassName(q)})}function j(){if(u){u.destroy();u=null}}x={init:function(E,F){x.setFetchWhereToAddWidget(F);if(x.isBuild()){return}l=E;f.add("WidgetCatalog-hide",x.hide);f.add("WidgetCatalog-show",x.show);f.add("WidgetCatalog-close",x.close);f.add("WidgetCatalog-open",x.open)},setFetchWhereToAddWidget:function(E){if(k.typeOf(E)==="function"){n=E}},isBuild:function(){return !!y},open:function(){if(!x.isBuild()){z()}x.setWidth(t);if(x.isCollapsed()){x.collapse()}x.show(true);y.show();c=true},close:function(){if(!x.isBuild()){return}y.hide();c=false;B();j()},isOpen:function(){return c},hide:function(E){if(!x.isBuild()||(!x.isOpen()&&!E)){return}y.addClassName(v)},show:function(E){if(!x.isBuild()||(!x.isOpen()&&!E)){return}y.removeClassName(v)},toggle:function(){if(x.isOpen()){x.close()}else{x.open()}},collapse:function(){s=true;if(!x.isBuild()){return}y.addClassName(A)},expand:function(){s=false;if(!x.isBuild()){return}y.removeClassName(A)},isCollapsed:function(){return s},setWidth:function(E){t=E;if(!x.isBuild()){return}y.setStyle("width",E)},resetWidth:function(){t=o;if(!x.isBuild()||!x.isOpen()){return}y.setStyle("width",o)}};return x});define("DS/UWPClientCode/Standalone/Bootstrap",["UWA/Core","DS/UWPClientCode/WidgetFactory","DS/UWPClientCode/PublicAPI",["DS","i3DXCompass","i3DXCompass"].join("/")],function(d,b,a,c){return{start:function(){var e={};if(!standaloneAppId){return}e.el=d.extendElement(document.body);e.parent=false;e.isolationLevel=1;e.preview=true;e.appId=standaloneAppId;standaloneAppData&&(e.data=standaloneAppData);d.createElement("div",{id:"compass-container",styles:{display:"none"}}).inject(document.body);d.createElement("div",{id:"my-apps-container",styles:{display:"none"}}).inject(document.body);c.initialize({compassTarget:"compass-container",appsTarget:"my-apps-container",launchOnSameDomain:true,myAppsBaseUrl:a.getApplicationConfiguration("app.urls.myapps")||"",userId:dsUserLogin});c.getAppInfo({appId:standaloneAppId,onComplete:function(f){if(f){e=d.extend(e,{widgetId:d.is(f.launchInfos)?f.launchInfos:f.platforms[0].launchInfos,isolationLevel:d.is(f.isolationLevel)?f.isolationLevel:f.platforms[0].isolationLevel,token:d.is(f.checksum)?f.checksum:f.platforms[0].checksum});b.load(e,function(){document.body.getElement("iframe").height=window.innerHeight})}else{e.el.setText(d.i18n("Unable to load this widget, please try again. If the problem persists please try another widget."));e.el.addClassName("launching-error")}}})}}});define("DS/UWPClientCode/Data/Notification",["module","DS/UWPClientCode/Data","DS/Logger/Logger"],function(d,c,a){var b=a.getLogger(d);return{get:function(e){c.request({method:"GET",url:c.prefix+"api/notification/"+e.id,success:e.success,failure:e.failure||b.error,async:e.async})},getAll:function(f){var e=(f.limit&&typeof f.limit==="number")?f.limit:7;c.request({method:"GET",url:c.prefix+"api/notification/unread",params:{limit:e},success:f.success,failure:f.failure||b.error,async:f.async})},setPublic:function(e){e=e||{};c.request({method:"POST",async:e.async,url:c.prefix+"api/share/public/"+e.id,params:{handler:e.handler,contentData:e.data},success:e.success,failure:e.failure,scope:e.scope})},createPrivate:function(e){e=e||{};c.request({method:"POST",async:e.async,url:c.prefix+"api/share/"+e.id,params:{handler:e.handler,contentData:e.data,to:e.to,message:e.message},success:e.success,failure:e.failure,scope:e.scope})},create:function(f){var g=f||{},e=g.accessType||3,h={widgetInstanceId:g.widgetInstanceId,handler:g.handler,accessType:e};if(!f){a.warn("create share notification: options object is mandatory")}if(!g.widgetInstanceId){a.warn("create share notification: widgetInstanceId is mandatory")}if(!g.handler){a.warn("create share notification: handler is mandatory")}if(g.recipientsByLogin){h.recipientsByLogin=g.recipientsByLogin}if(g.recipientsByEmail){h.recipientsByEmail=g.recipientsByEmail}if(g.message){h.message=g.message}if(g.data){h.contentData=g.data}c.request({method:"POST",async:true,url:c.prefix+"api/share",payload:h,success:g.success,failure:g.failure,scope:g.scope})},publish:function(e){var f=e||{},g;if(!e){a.warn("create share notification: options object is mandatory")}if(!f.publisherUrl){a.warn("DS/UWPClientCode/Data/Notification.publish: publisherUrl is mandatory")}if(!f.recipients){a.warn("DS/UWPClientCode/Data/Notification.publish: recipients is mandatory")}if(!f.messageId){a.warn("DS/UWPClientCode/Data/Notification.publish: messageId is mandatory")}if(!f.notificationId){a.warn("DS/UWPClientCode/Data/Notification.publish: notificationId is mandatory")}if(!f.linkUrl){a.warn("DS/UWPClientCode/Data/Notification.publish: linkUrl is mandatory")}if(!f.appId){a.warn("DS/UWPClientCode/Data/Notification.publish: appId is mandatory")}g={items:[{type:"NOTIF_UI",users_target:f.recipients,message:{nls:{msg:f.messageId},actions:[{type:"link",options:{event:{type:"url",options:{url:f.linkUrl,type:"GET"}}}}],icon:{type:"login",data:f.user}},service:{appID:f.appId,notificationID:f.notificationId}}]};if(f.data){g.items[0].message.nls.data=f.data}c.request({method:"POST",async:true,url:c.prefix+"api/notification/external",queryParams:{"service-url":f.publisherUrl},payload:g,success:f.success,failure:f.failure,scope:f.scope})},mail:function(e){var f=e||{};if(!e){a.warn("send notification by mail: options object is mandatory")}if(!f.notificationId){a.warn("send notification by mail: notificationId is mandatory")}c.request({method:"POST",async:f.async,url:c.prefix+"api/notification/mail",payload:{notificationId:f.notificationId},success:f.success,failure:f.failure,scope:f.scope})}}});define("DS/UWPClientCode/Data/NotificationModel",["UWA/Core","DS/UWPClientCode/Data/Notification"],function(g,c){var b,f=false,e=[],a;var d=function(h){this.notificationStore=h;this.getById=function(j){var i=this.notificationStore.detect(function(k){return j===""+k.id});return(i)?g.clone(i):null};this.getPublic=function(i){c.get({id:i.id,success:i.success})};this.getUnRead=function(){if(this.notificationStore){return g.clone(this.notificationStore)}}};b={fetch:function(h){h=h?h:{};if(!f||h.force){e.push(h);if(e.length===1){f=false;c.getAll({success:function(j){var m=0,k=e.length,n;a=new d(j);for(;m<k;m++){n=e[m];if(n.success&&typeof n.success==="function"){n.success.call(n.scope,a)}}f=true;e=[]},failure:function(){var k=0,j=e.length,m;for(;k<j;k++){m=e[k];if(m.failure&&typeof m.failure==="function"){m.failure.call(m.scope)}}e=[]},async:h.async})}}else{if(h.success&&typeof h.success==="function"){if(typeof h.async!=="undefined"&&!h.async){h.success.call(h.scope,a)}else{setTimeout(function(){h.success.call(h.scope,a)},0)}}}},isFetched:function(){return f}};return b});define("DS/UWPClientCode/Bootstrap",["UWA/Core","UWA/Event","UWA/Utils","UWA/Element","UWA/Promise","DS/UWPClientCode/Data/Widgets","DS/UWPClientCode/Navigation","DS/PubSub/PubSub","DS/UWPClientCode/PublicAPI","DS/WebappsUtils/Performance","ds/Csrf","ds/TranslateUWA","ds/Ajax","DS/UWPClientCode/UWA/Element","DS/MessageBus/MessageBus"],function(h,t,c,p,e,g,m,b,n,d){var s,j,a,f=function(){},k="wp_login_location";function i(){var u=e.deferred();t.onDomReady(function(){d.mark("wp_bootstrap_ondomready");document.documentElement.className+=" "+(c.Client.Features.touchEvents?"touch":"no-touch");u.resolve()});return u.promise}function q(){require(["DS/Logger/Logger","DS/Logger/Appenders/Quake"],function(v,u){v.addAppender("Quake",u)},f)}function l(){var v,u=(a==="PATH")?function(){var w=location.protocol+"//"+location.host+location.pathname;w=w.substring(dsBaseUrl.length);return m.historyChanged(w)}:function(y){var x,w;x=window.location.hash;w=c.parseUrl(y.newURL);if(w&&w.anchor){x=w.anchor}return m.historyChanged(x)};if(j){if(h.is(j.onNavigateSuccess,"function")){m.setNavigateSuccessHandler(j.onNavigateSuccess)}if(h.is(j.preNavigate,"function")){m.setPreNavigateHandler(j.preNavigate)}if(h.is(j.beforeNavigationStarts,"function")){j.beforeNavigationStarts()}}m.setMode(a);if(a==="PATH"){if(window.location.hash){v=window.location.pathname;window.location.replace(window.location.origin+(v.endsWith("/")?v:v+"/")+window.location.hash.replace(/#/g,"").replace(/:/g,"/")+window.location.search)}p.addEvent.call(window,"popstate",u)}else{p.addEvent.call(window,"hashchange",u)}return u({newURL:window.location.href})}function r(v){var u={};function w(z,x){var A=function(C){var B={};x.children.push(B);w(C,B)};for(var y in z){if(["id","name","parentId","urlHandler","urlPart"].indexOf(y)>-1){x[y]=z[y]}else{if(y==="children"){x.children=[];z.children.forEach(A)}}}}w(v,u);return u}function o(w){var u=sessionStorage.getItem(k),v;sessionStorage.removeItem(k);if(w==="HASH"&&u){if(u!==window.location.toString()){v=document.createElement("a");v.href=u;if(v.hash){window.location.hash=v.hash}}}}s={start:function(v,z){o(z);var y=h.is(v.start,"function")?v.start:f;a=z;if(n.getApplicationConfiguration("app.usage.enable")==="true"){var x=n.getApplicationConfiguration("app.usage.pathapi")||"/upload",u=n.getApplicationConfiguration("app.usage.service")||n.getApplicationConfiguration("app.build.name");u&&require(["DS/Usage/UsageManager","DS/Usage/TrackerAPI"],function(A,B){A.init({uploadPath:x,service:u});B.init()})}j=v;h.extend(h.paths,{css:"/lib/UWA/assets/css/",img:"/lib/UWA/assets/img/"});b.add(b.events.cardNavigation,function(B,A){if(h.is(B)&&h.is(A)){b.dispatch(b.events.cardNavigation+B,A,true)}},null,true);d.mark("wp_bootstrap_gethierarchy");var w=wap.widgetInstancesCacheId;g.getWidgetInstancePublicTree({success:function(A){var B;d.mark("wp_bootstrap_gothierarchy");B=r(A);m.setHierarchy(B);e.resolve().then(i).then(q).then(l).then(y)},cacheId:w})},getStartPageMode:function(){var x=[],v,w=window.location.href,z=c.getQueryString(w,"aloneWIId"),y=c.getQueryString(w,"aloneWId"),u=c.getQueryString(w,"rootId");if(z){x.push("instance",z)}else{if(y){v={id:y,data:c.getQueryString(w,"aloneWData"),name:c.getQueryString(w,"aloneWName")};x.push("widget",v)}else{if(u){x.push("root",u)}else{x.push("default","0")}}}return x}};return s});define("DS/UWPClientCode/Boot/Bootstrap",["UWA/Core","UWA/Promise","DS/UWPClientCode/WidgetFactory","DS/UWPClientCode/Bootstrap"],function(e,d,a,c){var b={start:function(){var g=d.deferred(),h=c.getStartPageMode(),f={};f.id=h[1];f.el=e.createElement("div",{"class":"module"}).inject(document.body);a.load(f);g.resolve();return g.promise}};return b});define("DS/UWPClientCode/UWA/Embedded",["UWA/Core","UWA/Embedded","UWA/Utils","DS/UWPClientCode/Navigation"],function(f,c,e,d){function b(g){return typeof g==="boolean"?(g===false?"0":"1"):e.encodeUrl(g)}var a={getIframeUrl:function(){var i,h,k=this,j=[],g=k.options,l=k.data,n=d.navigationMode.toLowerCase()==="path",m={id:k.id,uwaUrl:k.url,appId:g.appId,token:g.token,header:g.displayHeader,footer:g.displayFooter,displayEdit:g.displayEdit,autoLaunch:g.autoLaunch,widgetDomain:!n?window.location.toString().replace(/#.*$/,""):d.baseUrl,lang:g.lang,cache:g.cache,debug_me:g.debugMe};for(i in l){if(l.hasOwnProperty(i)&&!m.hasOwnProperty(i)){m[i]=l[i]}}for(i in m){if(m.hasOwnProperty(i)&&m[i]!==null){j.push(i+"="+b(m[i]))}}h=k.getIframeDomain()+"?"+j.join("&");if(n&&!e.isAbsoluteUrl(h)){h=d.baseUrl+h}if(h.length>2048){throw new Error("UWA.Embedded iframe url is more than 2048 characters please implement UWA.Embedded using offlineMode=true.")}return h},destroy:function(g){this.socket&&this.socket.disconnect();if(f.Embedded.Instances[g]){Object.keys(f.Embedded.Instances[g].elements).forEach(function(h){f.Embedded.Instances[g].elements[h].destroy&&f.Embedded.Instances[g].elements[h].destroy();f.Embedded.Instances[g].elements[h]=null;delete f.Embedded.Instances[g].elements[h]},this);f.Embedded.Instances[g]=null;delete f.Embedded.Instances[g]}}};c.prototype.getIframeUrl=a.getIframeUrl;c.prototype.destroy=a.destroy;c.prototype.onViewRequest=function(){};return a});define("DS/UWPClientCode/Boot/Environment",["UWA/Core","UWA/Environment","UWA/Storage","DS/UWPClientCode/Data/Widgets","DS/UWPClientControls/Utils","DS/UWPClientCode/I18n","DS/UWPClientCode/UWA/Embedded"],function(g,c,d,b,f,e){var a=c.extend({name:"boot",init:function(h){this.wp=g.merge({isVisible:true},h);this.html={};this.Features={};this.view={};this.options={defaultView:{type:"windowed"}};this.html.module=h.el;this.buildSkeleton();this.dispatchInit()},loadWidget:function(j,i){var h={onFailure:function(k){throw k},onTimeout:function(k){throw k},onComplete:function(){}};i=g.extend(h,i);if(this.wp.isolationLevel){this.loadEmbeddedWidget(this.wp.widgetId||j,i);this.dispatchEvent("onRegisterWidget")}else{this.loadInlinedWidget(this.wp.widgetId||j,i)}return this},loadInlinedWidget:function(i,h){var k=this.getWidget(),j=h.fetcher;k.id=this.wp.id;j.title=this.wp.title;k.setStyle(j.style);delete h.fetcher.style;return this._parent(i,h)},loadEmbeddedWidget:function(j,i){var k=this.getWidget(),h;k.id=this.wp.id;i.cache=this.wp.checksum;h={id:this.wp.id,appId:this.wp.appId,token:this.wp.token,lang:e.getCurrentLanguage(),displayEdit:false,height:"100%",exposition:this.wp.isolationLevel===2?g.hosts.untrustedExposition:g.hosts.exposition,debugMe:g.debug?1:null};i.embedded=g.extend(i.embedded||{},h);this._parent(j,i);return this},buildSkeleton:function(){var i=this.wp,j=g.createElement,h=this.html;if(!h.module.hasClassName("module")){h.module=j("div",{"class":"module"}).inject(h.module)}h.module.addClassName("wi-"+this.wp.id);h.wrapper=j("div",{"class":"moduleWrapper"}).inject(h.module);if(!i.isContainer){h.body=j("div",{"class":"moduleContent w-"+i.widgetId}).inject(h.wrapper)}else{h.body=h.wrapper;h.module.addClassName("moduleLayout")}},setVisible:function(k,j){var h=this.wp,i=this.getWidget();if(h.isVisible!==k||j){h.isVisible=!!k;i.dispatchEvent(k?"onShow":"onHide")}},onRegisterWidget:function(){if(this.registered){return}this.data=new d({adapter:"Object",database:"preference-"+this.wp.id})},onUpdateValue:function(){var h=this.widget;if(h.launched&&!h.isEdit){this.save()}},save:function(){var h=this;if(!this._save){this._save=f.debounce(function(){if(h.destroyed){return}b.editWidgetInstance({id:h.wp.id,data:h.getAllData()})},300)}this._save()}});return a});